this.google=this.google||{},this.google.maps=this.google.maps||{},this.google.maps.plugins=this.google.maps.plugins||{},this.google.maps.plugins.loader=function(i){"use strict";function e(i,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}var t=function(){function i(e){var t=e.apiKey,a=e.libraries,n=void 0===a?[]:a,s=e.channel,l=e.language,o=e.clientId,r=e.region,c=e.version;!function(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.CALLBACK="__google_maps_callback",this.URL="https://maps.googleapis.com/maps/api/js",this.callbacks=[],this.done=!1,this.loading=!1,this.version=c,this.apiKey=t,this.libraries=n,this.channel=s,this.language=l,this.clientId=o,this.region=r}var t,a,n;return t=i,(a=[{key:"createUrl",value:function(){var i=this.URL;return i+="?callback="+this.CALLBACK,this.apiKey&&(i+="&key="+this.apiKey),this.libraries.length>0&&(i+="&libraries="+this.libraries.join(",")),this.clientId&&(i+="&client="+this.clientId),this.channel&&(i+="&channel="+this.channel),this.language&&(i+="&language="+this.language),this.region&&(i+="&region="+this.region),this.version&&(i+="&v="+this.version),i}},{key:"load",value:function(){return this.loadPromise()}},{key:"loadPromise",value:function(){var i=this;return new Promise((function(e,t){i.loadCallback((function(i){i?t(i):e()}))}))}},{key:"loadCallback",value:function(i){this.callbacks.push(i),this.execute()}},{key:"setScript",value:function(){var i=this.createUrl(),e=document.createElement("script");e.type="text/javascript",e.src=i,e.onerror=this.loadErrorCallback,e.defer=!0,e.async=!0,document.head.appendChild(e)}},{key:"loadErrorCallback",value:function(i){this.onerrorEvent=i,this.callback()}},{key:"setCallback",value:function(){window[this.CALLBACK]=this.callback.bind(this)}},{key:"callback",value:function(){var i=this;this.done=!0,this.loading=!1,this.callbacks.forEach((function(e){e(i.onerrorEvent)})),this.callbacks=[]}},{key:"execute",value:function(){this.done?this.callback():this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}])&&e(t.prototype,a),n&&e(t,n),i}();return i.Loader=t,i}({});
